{"ast":null,"code":"var _jsxFileName = \"/Users/jan/Documents/lambda/Web_Applications_II/12_Build_Week/FE/src/components/Login.js\";\nimport React, { useReducer, useState, useEffect } from 'react';\nimport { Form, Input, Button, Label, Div, StyledDiv, StyledDiv2, H2, P, Span1, Span2, Div2 } from '../styles/Styles';\nimport * as yup from 'yup';\nimport { axiosWithAuth } from '../utils/axiosWithAuth';\nimport { useForm } from 'react-hook-form';\nimport { NavLink } from 'react-router-dom';\nimport ErrorMessagesLI from './ErrorMessagesLI';\nconst validationSchema = yup.object().shape({\n  email: yup.string().email('Must be in the form of an email.').required('Enter an email.').min(3, 'You need a longer email.').max(36, 'Your email is too long.'),\n  password: yup.string().required('Enter a password.').min(4, 'Password is too short.').max(20, 'Password exceeds character limit.')\n});\nconst initialState = {\n  email: '',\n  password: ''\n};\n\nfunction loginReducer(state, action) {\n  return state;\n}\n\nfunction Login(props) {\n  const [score, setScore] = useState();\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm({\n    validationSchema: validationSchema\n  });\n  const [state, dispatch] = useReducer(loginReducer, initialState); // email: 1234@gmail.com    password: 1234\n\n  const onSubmit = data => {\n    console.log('Data from Login\\'n onSubmit', data);\n    dispatch(state.email = data.email, state.password = data.password); // console.log('state', state, 'data', data);\n    // e.preventDefault();\n\n    axiosWithAuth().post('/api/login', state).then(res => {\n      console.log('res from Login', res);\n      console.log('TOKEN:', res.data.token);\n      localStorage.setItem('token', res.data.token);\n      localStorage.setItem('id', res.data.id);\n      props.history.push('/home-page');\n    }).catch(err => console.log(err));\n\n    const getPoints = () => axiosWithAuth().get(`/api/users/${localStorage.id}`).then(res => localStorage.setItem('points', res.data.points));\n\n    getPoints();\n    document.getElementById('form').reset();\n  };\n\n  return React.createElement(Form, {\n    id: \"form\",\n    onSubmit: handleSubmit(onSubmit),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(StyledDiv, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(H2, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"Sign In\"), React.createElement(StyledDiv2, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(Div, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(Label, {\n    htmlFor: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"Email\"), React.createElement(Input, {\n    name: \"email\",\n    type: \"text\",\n    ref: register,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  })), React.createElement(Div, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(Label, {\n    htmlFor: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"Password\"), React.createElement(Input, {\n    name: \"password\",\n    type: \"password\",\n    ref: register,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }))), React.createElement(Div, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(ErrorMessagesLI, {\n    errors: errors,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  })), React.createElement(Button, {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \"Sign In\"), React.createElement(P, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"Don't have an account? \", React.createElement(NavLink, {\n    to: \"/create-account\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"Create Account\"), ' ')));\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/jan/Documents/lambda/Web_Applications_II/12_Build_Week/FE/src/components/Login.js"],"names":["React","useReducer","useState","useEffect","Form","Input","Button","Label","Div","StyledDiv","StyledDiv2","H2","P","Span1","Span2","Div2","yup","axiosWithAuth","useForm","NavLink","ErrorMessagesLI","validationSchema","object","shape","email","string","required","min","max","password","initialState","loginReducer","state","action","Login","props","score","setScore","register","handleSubmit","errors","dispatch","onSubmit","data","console","log","post","then","res","token","localStorage","setItem","id","history","push","catch","err","getPoints","get","points","document","getElementById","reset"],"mappings":"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","sourcesContent":["import React, { useReducer, useState, useEffect } from 'react';\nimport { Form, Input, Button, Label, Div, StyledDiv, StyledDiv2, H2, P, Span1, Span2, Div2 } from '../styles/Styles';\nimport * as yup from 'yup';\nimport { axiosWithAuth } from '../utils/axiosWithAuth';\nimport { useForm } from 'react-hook-form';\nimport { NavLink } from 'react-router-dom';\n\nimport ErrorMessagesLI from './ErrorMessagesLI';\n\nconst validationSchema = yup.object().shape({\n\temail: yup\n        .string()\n        .email('Must be in the form of an email.')\n        .required('Enter an email.')\n\t\t.min(3, 'You need a longer email.')\n        .max(36, 'Your email is too long.'),\n\tpassword: yup\n\t\t.string()\n\t\t.required('Enter a password.')\n\t\t.min(4, 'Password is too short.')\n\t\t.max(20, 'Password exceeds character limit.')\n});\n\nconst initialState = {\n\temail: '',\n\tpassword: ''\n};\n\nfunction loginReducer(state, action) {\n\treturn state;\n}\n\nfunction Login(props) {\n\tconst [score, setScore] = useState()\n\tconst { register, handleSubmit, errors } = useForm({ validationSchema: validationSchema });\n\tconst [ state, dispatch ] = useReducer(loginReducer, initialState);\n\t// email: 1234@gmail.com    password: 1234\n\tconst onSubmit = (data) => {\n\t\tconsole.log('Data from Login\\'n onSubmit', data);\n\t\tdispatch((state.email = data.email), (state.password = data.password));\n\t\t// console.log('state', state, 'data', data);\n\t\t// e.preventDefault();\n\t\taxiosWithAuth()\n\t\t\t.post('/api/login', state)\n\t\t\t.then((res) => {\n\t\t\t\tconsole.log('res from Login', res);\n\t\t\t\tconsole.log('TOKEN:', res.data.token);\n\t\t\t\tlocalStorage.setItem('token', res.data.token);\n\t\t\t\tlocalStorage.setItem('id', res.data.id);\n\t\t\t\tprops.history.push('/home-page');\n\t\t\t})\n\t\t\t.catch((err) => console.log(err));\n\t\t\tconst getPoints = () => axiosWithAuth().get(`/api/users/${localStorage.id}`).then(res=>localStorage.setItem('points',res.data.points));\n\t\t\tgetPoints();\n\t\tdocument.getElementById('form').reset();\n\t\t\n\t};\n\t\t\n\treturn (\n\t\t<Form id='form' onSubmit={handleSubmit(onSubmit)}>\n\t\t\t<StyledDiv>\n\t\t\t\t<H2>Sign In</H2>\n\t\t\t\t<StyledDiv2>\n\t\t\t\t\t<Div>\n\t\t\t\t\t\t<Label htmlFor='email'>Email</Label>\n\t\t\t\t\t\t<Input name='email' type='text' ref={register} />\n\t\t\t\t\t</Div>\n\t\t\t\t\t<Div>\n\t\t\t\t\t\t<Label htmlFor='password'>Password</Label>\n\t\t\t\t\t\t<Input name='password' type='password' ref={register} />\n\t\t\t\t\t</Div>\n\t\t\t\t</StyledDiv2>\n\t\t\t\t<Div>\n\t\t\t\t\t<ErrorMessagesLI errors={errors} />\n\t\t\t\t</Div>\n\t\t\t\t<Button type='submit'>Sign In</Button>\n\t\t\t\t<P>\n\t\t\t\t\tDon't have an account? <NavLink to='/create-account'>Create Account</NavLink>{' '}\n\t\t\t\t</P>\n\t\t\t</StyledDiv>\n\t\t</Form>\n\t);\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}